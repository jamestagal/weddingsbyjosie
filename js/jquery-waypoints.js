(function(){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},e=[].slice;(function(e,t){return typeof define=="function"&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)})(this,function(n,s){var o,h=n(s),g=t.call(s,"ontouchstart")>=0,r={horizontal:{},vertical:{}},b=1,c={},d="waypoints-context-id",f="resize.waypoints",p="scroll.waypoints",v=1,u="waypoints-waypoint-ids",l="waypoint",a="waypoints",j=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+b++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[d]=this.id,c[this.id]=this,e.bind(p,function(){var e;if(!t.didScroll&&!g)return t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},s.setTimeout(e,n[a].settings.scrollThrottle)}),e.bind(f,function(){var e;if(!t.didResize)return t.didResize=!0,e=function(){return n[a]("refresh"),t.didResize=!1},s.setTimeout(e,n[a].settings.resizeThrottle)})}return e.prototype.doScroll=function(){var t=this,e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};return g&&(!e.vertical.oldScroll||!e.vertical.newScroll)&&n[a]("refresh"),n.each(e,function(e,s){var o=[],i=s.newScroll>s.oldScroll,a=i?s.forward:s.backward;return n.each(t.waypoints[e],function(e,t){var n,i;if(s.oldScroll<(n=t.offset)&&n<=s.newScroll)return o.push(t);if(s.newScroll<(i=t.offset)&&i<=s.oldScroll)return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),i||o.reverse(),n.each(o,function(e,t){if(t.options.continuous||e===o.length-1)return t.trigger([a])})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var t,o=this,e=n.isWindow(this.element),s=this.$element.offset();return this.doScroll(),t={horizontal:{contextOffset:e?0:s.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:s.top,contextScroll:e?0:this.oldScroll.y,contextDimension:e?n[a]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(t,function(e,t){return n.each(o.waypoints[e],function(e,s){var a,r,o=s.options.offset,i=s.offset,c=n.isWindow(s.element)?0:s.$element.offset()[t.offsetProp];if(n.isFunction(o)?o=o.apply(s.element):typeof o=="string"&&(o=parseFloat(o),s.options.offset.indexOf("%")>-1&&(o=Math.ceil(t.contextDimension*o/100))),s.offset=c-t.contextOffset+t.contextScroll-o,s.options.onlyOnScroll&&i!=null||!s.enabled)return;if(i!==null&&i<(a=t.oldScroll)&&a<=s.offset)return s.trigger([t.backward]);if(i!==null&&i>(r=t.oldScroll)&&r>=s.offset)return s.trigger([t.forward]);if(i===null&&t.oldScroll>=s.offset)return s.trigger([t.forward])})})},e.prototype.checkEmpty=function(){if(n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([f,p].join(" ")),delete c[this.id]},e}(),m=function(){function e(e,t,s){var o,i;s=n.extend({},n.fn[l].defaults,s),s.offset==="bottom-in-view"&&(s.offset=function(){var e=n[a]("viewportHeight");return n.isWindow(t.element)||(e=t.$element.height()),e-n(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=s.horizontal?"horizontal":"vertical",this.callback=s.handler,this.context=t,this.enabled=s.enabled,this.id="waypoints"+v++,this.offset=null,this.options=s,t.waypoints[this.axis][this.id]=this,r[this.axis][this.id]=this,o=(i=this.element[u])!=null?i:[],o.push(this.id),this.element[u]=o}return e.prototype.trigger=function(e){if(!this.enabled)return;if(this.callback!=null&&this.callback.apply(this.element,e),this.options.triggerOnce)return this.destroy()},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete r[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,s=e[u];return s?(t=n.extend({},r.horizontal,r.vertical),n.map(s,function(e){return t[e]})):[]},e}(),i={init:function(e,t){var s;return t==null&&(t={}),(s=t.handler)==null&&(t.handler=e),this.each(function(){var s,i,o=n(this),e=(i=t.context)!=null?i:n.fn[l].defaults.context;return n.isWindow(e)||(e=o.closest(e)),e=n(e),s=c[e[0][d]],s||(s=new j(e)),new m(o,s,t)}),n[a]("refresh"),this},disable:function(){return i._invoke.call(this,"disable")},enable:function(){return i._invoke.call(this,"enable")},destroy:function(){return i._invoke.call(this,"destroy")},prev:function(e,t){return i._traverse.call(this,e,t,function(e,t,n){if(t>0)return e.push(n[t-1])})},next:function(e,t){return i._traverse.call(this,e,t,function(e,t,n){if(t<n.length-1)return e.push(n[t+1])})},_traverse:function(e,t,i){var a,r;return e==null&&(e="vertical"),t==null&&(t=s),r=o.aggregate(t),a=[],this.each(function(){var t=n.inArray(this,r[e]);return i(a,t,r[e])}),this.pushStack(a)},_invoke:function(e){return this.each(function(){var t=m.getWaypointsByElement(this);return n.each(t,function(t,n){return n[e](),!0})}),this}};return n.fn[l]=function(){var t=arguments[0],s=2<=arguments.length?e.call(arguments,1):[];return i[t]?i[t].apply(this,s):n.isFunction(t)?i.init.apply(this,arguments):n.isPlainObject(t)?i.init.apply(this,[null,t]):t?n.error("The "+t+" method does not exist in jQuery Waypoints."):n.error("jQuery Waypoints needs a callback function or handler option.")},n.fn[l].defaults={context:s,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},o={refresh:function(){return n.each(c,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return(e=s.innerHeight)!=null?e:h.height()},aggregate:function(e){var t,o,s=r;return e&&(s=(o=c[n(e)[0][d]])!=null?o.waypoints:void 0),s?(t={horizontal:[],vertical:[]},n.each(t,function(e,o){return n.each(s[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),t[e]=n.map(o,function(e){return e.element}),t[e]=n.unique(t[e])}),t):[]},above:function(e){return e==null&&(e=s),o._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return e==null&&(e=s),o._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return e==null&&(e=s),o._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return e==null&&(e=s),o._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return o._invoke("enable")},disable:function(){return o._invoke("disable")},destroy:function(){return o._invoke("destroy")},extendFn:function(e,t){return i[e]=t},_invoke:function(e){var t=n.extend({},r.vertical,r.horizontal);return n.each(t,function(t,n){return n[e](),!0})},_filter:function(e,t,s){var o,i=c[n(e)[0][d]];return i?(o=[],n.each(i.waypoints[t],function(e,t){if(s(i,t))return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),n.map(o,function(e){return e.element})):[]}},n[a]=function(){var t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[];return o[t]?o[t].apply(null,n):o.aggregate.call(null,t)},n[a].settings={resizeThrottle:100,scrollThrottle:30},h.load(function(){return n[a]("refresh")})})}).call(this)