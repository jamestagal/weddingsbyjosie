!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Tether=t()}(this,function(){"use strict";function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){var n,s,i,o=e.getBoundingClientRect(),t={};for(i in o)t[i]=o[i];return e.ownerDocument!==document&&(s=e.ownerDocument.defaultView.frameElement,s&&(n=v(s),t.top+=n.top,t.bottom+=n.top,t.left+=n.left,t.right+=n.left)),t}function w(e){var a=getComputedStyle(e)||{},i=a.position,n=[];if("fixed"===i)return[e];for(t=e;(t=t.parentNode)&&t&&1===t.nodeType;){s=void 0;try{s=getComputedStyle(t)}catch(e){}if("undefined"==typeof s||null===s)return n.push(t),n;var t,s,o=s,r=o.overflow,c=o.overflowX,l=o.overflowY;/(auto|scroll)/.test(r+l+c)&&("absolute"!==i||["relative","absolute","fixed"].indexOf(s.position)>=0)&&n.push(t)}return n.push(e.ownerDocument.body),e.ownerDocument!==document&&n.push(e.ownerDocument.defaultView),n}function x(){h&&document.body.removeChild(h),h=null}function i(e){n=void 0,e===document?(n=document,e=document.documentElement):n=e.ownerDocument;var n,s=n.documentElement,t=v(e),o=K();return t.top-=o.top,t.left-=o.left,"undefined"==typeof t.width&&(t.width=document.body.scrollWidth-t.left-t.right),"undefined"==typeof t.height&&(t.height=document.body.scrollHeight-t.top-t.bottom),t.top=t.top-s.clientTop,t.left=t.left-s.clientLeft,t.right=n.body.clientWidth-t.width-t.left,t.bottom=n.body.clientHeight-t.height-t.top,t}function m(e){return e.offsetParent||document.documentElement}function _(){var e,n,s,o,t=document.createElement("div");return t.style.width="100%",t.style.height="200px",e=document.createElement("div"),a(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),s=t.offsetWidth,e.style.overflow="scroll",n=t.offsetWidth,s===n&&(n=e.clientWidth),document.body.removeChild(e),o=s-n,{width:o,height:o}}function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var n in t)({}.hasOwnProperty.call(t,n)&&(e[n]=t[n]))}),e}function d(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var n=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),s=E(e).replace(n," ");N(e,s)}}function l(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{d(e,t);var n=E(e)+(" "+t);N(e,n)}}function k(e,t){if("undefined"!=typeof e.classList)return e.classList.contains(t);var n=E(e);return new RegExp("(^| )"+t+"( |$)","gi").test(n)}function E(e){return e.className instanceof e.ownerDocument.defaultView.SVGAnimatedString?e.className.baseVal:e.className}function N(e,t){e.setAttribute("class",t)}function r(e,t,n){n.forEach(function(n){-1===t.indexOf(n)&&k(e,n)&&d(e,n)}),t.forEach(function(t){k(e,t)||l(e,t)})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e,t){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e+n>=t&&t>=e-n}function A(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function L(){for(var t={top:0,left:0},n=arguments.length,s=Array(n),e=0;n>e;e++)s[e]=arguments[e];return s.forEach(function(e){var n=e.top,s=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof s&&(s=parseFloat(s,10)),t.top+=n,t.left+=s}),t}function g(e,t){return"string"==typeof e.left&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left,10)/100*t.width),"string"==typeof e.top&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top,10)/100*t.height),e}function W(e,t){return"scrollParent"===t?t=e.scrollParents[0]:"window"===t&&(t=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),t===document&&(t=t.documentElement),"undefined"!=typeof t.nodeType&&!function(){var e,o=t,s=i(t),n=s,a=getComputedStyle(t);(t=[n.left,n.top,s.width+n.left,s.height+n.top],o.ownerDocument!==document)&&(e=o.ownerDocument.defaultView,t[0]+=e.pageXOffset,t[1]+=e.pageYOffset,t[2]+=e.pageXOffset,t[3]+=e.pageYOffset),H.forEach(function(e,n){e=e[0].toUpperCase()+e.substr(1),"Top"===e||"Left"===e?t[n]+=parseFloat(a["border"+e+"Width"]):t[n]-=parseFloat(a["border"+e+"Width"])})}(),t}y=function(){function e(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),o=void 0,"undefined"==typeof o&&(o={modules:[]});var h=null,F=function(){var e=0;return function(){return++e}}(),j={},K=function(){var t,e=h;return e||(e=document.createElement("div"),e.setAttribute("data-tether-id",F()),a(e.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(e),h=e),t=e.getAttribute("data-tether-id"),"undefined"==typeof j[t]&&(j[t]=v(e),c(function(){delete j[t]})),j[t]},M=[],c=function(e){M.push(e)},p=function(){for(var e=void 0;e=M.pop();)e()},T=function(){function e(){S(this,e)}return y(e,[{key:"on",value:function(e,t,n){var s=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[e]&&(this.bindings[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:s})}},{key:"once",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"off",value:function(e,t){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[e])if("undefined"==typeof t)delete this.bindings[e];else for(var n=0;n<this.bindings[e].length;)this.bindings[e][n].handler===t?this.bindings[e].splice(n,1):++n}},{key:"trigger",value:function(e){if("undefined"!=typeof this.bindings&&this.bindings[e]){for(var t=0,s=arguments.length,a=Array(s>1?s-1:0),n=1;s>n;n++)a[n-1]=arguments[n];for(;t<this.bindings[e].length;){var i=this.bindings[e][t],r=i.handler,c=i.ctx,l=i.once,o=c;"undefined"==typeof o&&(o=this),r.apply(o,a),l?this.bindings[e].splice(t,1):++t}}}}]),e}();o.Utils={getActualBoundingClientRect:v,getScrollParents:w,getBounds:i,getOffsetParent:m,extend:a,addClass:l,removeClass:d,hasClass:k,updateClasses:r,defer:c,flush:p,uniqueId:F,Evented:T,getScrollBarSize:_,removeUtilElements:x};var u=function(){function e(e,t){var n,r,s=[],o=!0,i=!1,a=void 0;try{for(n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&n.return&&n.return()}finally{if(i)throw a}}return s}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function e(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),U=function(e,t,n){for(o=!0;o;){var s,a,r,i=e,c=t,l=n,o=!1;if(null===i&&(i=Function.prototype),s=Object.getOwnPropertyDescriptor(i,c),void 0!==s){if("value"in s)return s.value;if(r=s.get,void 0===r)return;return r.call(l)}if(a=Object.getPrototypeOf(i),null===a)return;e=a,t=c,n=l,o=!0,s=a=void 0}};if("undefined"==typeof o)throw new Error("You must include the utils.js file before tether.js");var o,u,y,s=o.Utils,w=s.getScrollParents,i=s.getBounds,m=s.getOffsetParent,a=s.extend,l=s.addClass,d=s.removeClass,r=s.updateClasses,c=s.defer,p=s.flush,_=s.getScrollBarSize,x=s.removeUtilElements,O=function(){if("undefined"==typeof document)return"";for(var t,s=document.createElement("div"),n=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],e=0;e<n.length;++e)if(t=n[e],void 0!==s.style[t])return t}(),f=[],P=function(){f.forEach(function(e){e.position(!1)}),p()};!function(){var t=null,e=null,n=null,s=function s(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(n=setTimeout(s,250))):void("undefined"!=typeof t&&A()-t<10||(null!=n&&(clearTimeout(n),n=null),t=A(),P(),e=A()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,s)})}();var Y={center:"center",left:"right",right:"left"},I={middle:"middle",top:"bottom",bottom:"top"},b={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},V=function(e,t){var n=e.left,s=e.top;return"auto"===n&&(n=Y[t.left]),"auto"===s&&(s=I[t.top]),{left:n,top:s}},R=function(e){var t=e.left,n=e.top;return"undefined"!=typeof b[e.left]&&(t=b[e.left]),"undefined"!=typeof b[e.top]&&(n=b[e.top]),{left:t,top:n}},C=function(e){var n=e.split(" "),t=u(n,2),s=t[0],o=t[1];return{top:s,left:o}},D=C,z=function(e){function t(e){var n=this;S(this,t),U(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.position=this.position.bind(this),f.push(this),this.history=[],this.setOptions(e,!1),o.modules.forEach(function(e){"undefined"!=typeof e.initialize&&e.initialize.call(n)}),this.position()}return B(t,e),y(t,[{key:"getClass",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=this.options.classes;return"undefined"!=typeof t&&t[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function(e){var t=this,s=arguments.length<=1||void 0===arguments[1]||arguments[1],o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=a(o,e);var n=this.options,i=n.element,r=n.target,c=n.targetModifier;if(this.element=i,this.target=r,this.targetModifier=c,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(e){if("undefined"==typeof t[e])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof t[e].jquery?t[e]=t[e][0]:"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),l(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=D(this.options.targetAttachment),this.attachment=D(this.options.attachment),this.offset=C(this.options.offset),this.targetOffset=C(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=w(this.target),this.options.enabled!==!1&&this.enable(s)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return i(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(t=i(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left},e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e);if("scroll-handle"===this.targetModifier){t=void 0,n=this.target,n===document.body?(n=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=i(n);var e,t,n,c,o=getComputedStyle(n),l=n.scrollWidth>n.clientWidth||[o.overflow,o.overflowX].indexOf("scroll")>=0||this.target!==document.body,a=0;l&&(a=15);var s=t.height-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-a,e={width:15,height:.975*s*(s/n.scrollHeight),left:t.left+t.width-parseFloat(o.borderLeftWidth)-15},r=0;return 408>s&&this.target===document.body&&(r=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24)),c=this.target.scrollTop/(n.scrollHeight-s),e.top=c*(s-e.height-r)+t.top+parseFloat(o.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(e,t){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]}},{key:"enable",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()}},{key:"disable",value:function(){var e=this;d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function(){var e=this;this.disable(),f.forEach(function(t,n){t===e&&f.splice(n,1)}),0===f.length&&x()}},{key:"updateAttachClasses",value:function(e,t){var s,o,i,n=this;e=e||this.attachment,t=t||this.targetAttachment,i=["left","top","bottom","right","middle","center"],"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]),s=this._addAttachClasses,e.top&&s.push(this.getClass("element-attached")+"-"+e.top),e.left&&s.push(this.getClass("element-attached")+"-"+e.left),t.top&&s.push(this.getClass("target-attached")+"-"+t.top),t.left&&s.push(this.getClass("target-attached")+"-"+t.left),o=[],i.forEach(function(e){o.push(n.getClass("element-attached")+"-"+e),o.push(n.getClass("target-attached")+"-"+e)}),c(function(){"undefined"!=typeof n._addAttachClasses&&(r(n.element,n._addAttachClasses,o),n.options.addTargetClasses!==!1&&r(n.target,n._addAttachClasses,o),delete n._addAttachClasses)})}},{key:"position",value:function(){if(l=this,C=arguments.length<=0||void 0===arguments[0]||arguments[0],this.enabled){this.clearCache(),f=V(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,f);var b=this.cache("element-bounds",function(){return i(l.element)}),n=b.width,s=b.height;0===n&&0===s&&"undefined"!=typeof this.lastSize?(j=this.lastSize,n=j.width,s=j.height):this.lastSize={width:n,height:s};for(var r,l,f,j,w,C,v=this.cache("target-bounds",function(){return l.getTargetBounds()}),O=v,u=g(R(this.attachment),{width:n,height:s}),d=g(R(f),O),k=g(this.offset,{width:n,height:s}),x=g(this.targetOffset,O),u=L(u,k),d=L(d,x),c=v.left+d.left-u.left,a=v.top+d.top-u.top,y=0;y<o.modules.length;++y){if(w=o.modules[y],r=w.position.call(this,{left:c,top:a,targetAttachment:f,targetPos:v,elementPos:b,offset:u,targetOffset:d,manualOffset:k,manualTargetOffset:x,scrollbarSize:h,attachment:this.attachment}),r===!1)return!1;"undefined"!=typeof r&&"object"==typeof r&&(a=r.top,c=r.left)}var e={page:{top:a,left:c},viewport:{top:a-pageYOffset,bottom:pageYOffset-a-s+innerHeight,left:c-pageXOffset,right:pageXOffset-c-n+innerWidth}},t=this.target.ownerDocument,E=t.defaultView,h=void 0;return t.body.scrollWidth>E.innerWidth&&(h=this.cache("scrollbar-size",_),e.viewport.bottom-=h.height),t.body.scrollHeight>E.innerHeight&&(h=this.cache("scrollbar-size",_),e.viewport.right-=h.width),(-1===["","static"].indexOf(t.body.style.position)||-1===["","static"].indexOf(t.body.parentElement.style.position))&&(e.page.bottom=t.body.scrollHeight-a-s,e.page.right=t.body.scrollWidth-c-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var r,c,o=l.cache("target-offsetparent",function(){return m(l.target)}),n=l.cache("target-offsetparent-bounds",function(){return i(o)}),d=getComputedStyle(o),a=n,s={};["Top","Left","Bottom","Right"].forEach(function(e){s[e.toLowerCase()]=parseFloat(d["border"+e+"Width"])}),n.right=t.body.scrollWidth-n.left-a.width+s.right,n.bottom=t.body.scrollHeight-n.top-a.height+s.bottom,e.page.top>=n.top+s.top&&e.page.bottom>=n.bottom&&e.page.left>=n.left+s.left&&e.page.right>=n.right&&(r=o.scrollTop,c=o.scrollLeft,e.offset={top:e.page.top-n.top+r-s.top,left:e.page.left-n.left+c-s.left})}(),this.move(e),this.history.unshift(e),this.history.length>3&&this.history.pop(),C&&p(),!0}}},{key:"move",value:function(e){if(s=this,"undefined"!=typeof this.element.parentNode){t={};for(r in e){t[r]={};for(o in e[r]){for(f=!1,l=0;l<this.history.length;++l)if(u=this.history[l],"undefined"!=typeof u[r]&&!$(u[r][o],e[r][o])){f=!0;break}f||(t[r][o]=!0)}}var t,s,o,i,r,l,u,h,f,p,g,v,j,n={top:"",left:"",right:"",bottom:""},d=function(e,t){var o,i,a="undefined"!=typeof s.options.optimizations,r=a?s.options.optimizations.gpu:null;r!==!1?(o=void 0,i=void 0,e.top?(n.top=0,o=t.top):(n.bottom=0,o=-t.bottom),e.left?(n.left=0,i=t.left):(n.right=0,i=-t.right),n[O]="translateX("+Math.round(i)+"px) translateY("+Math.round(o)+"px)","msTransform"!==O&&(n[O]+=" translateZ(0)")):(e.top?n.top=t.top+"px":n.bottom=t.bottom+"px",e.left?n.left=t.left+"px":n.right=t.right+"px")},b=!1;if((t.page.top||t.page.bottom)&&(t.page.left||t.page.right)?(n.position="absolute",d(t.page,e.page)):(t.viewport.top||t.viewport.bottom)&&(t.viewport.left||t.viewport.right)?(n.position="fixed",d(t.viewport,e.viewport)):"undefined"!=typeof t.offset&&t.offset.top&&t.offset.left?!function(){n.position="absolute";var o=s.cache("target-offsetparent",function(){return m(s.target)});m(s.element)!==o&&c(function(){s.element.parentNode.removeChild(s.element),o.appendChild(s.element)}),d(t.offset,e.offset),b=!0}():(n.position="absolute",d({top:!0,left:!0},e.page)),!b){for(h=!0,i=this.element.parentNode;i&&1===i.nodeType&&"BODY"!==i.tagName;){if("static"!==getComputedStyle(i).position){h=!1;break}i=i.parentNode}h||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}p={},g=!1;for(o in n)v=n[o],j=this.element.style[o],j!==v&&(g=!0,p[o]=v);g&&c(function(){a(s.element.style,p)})}}}]),t}(T);z.modules=[],o.position=P;var q=a(z,o),u=function(){function e(e,t){var n,r,s=[],o=!0,i=!1,a=void 0;try{for(n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&n.return&&n.return()}finally{if(i)throw a}}return s}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=o.Utils,i=s.getBounds,a=s.extend,r=s.updateClasses,c=s.defer,H=["left","top","right","bottom"];o.modules.push({position:function(e){var b,h=this,n=e.top,s=e.left,v=e.targetAttachment;if(!this.options.constraints)return!0;var j=this.cache("element-bounds",function(){return i(h.element)}),l=j.height,d=j.width;0===d&&0===l&&"undefined"!=typeof this.lastSize&&(b=this.lastSize,d=b.width,l=b.height);var y=this.cache("target-bounds",function(){return h.getTargetBounds()}),m=y.height,f=y.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass,n=e.pinnedClass;t&&p.push(t),n&&p.push(n)}),p.forEach(function(e){["left","top","right","bottom"].forEach(function(t){p.push(e+"-"+t)})});var g=[],o=a({},v),t=a({},this.attachment);return this.options.constraints.forEach(function(e){var i,r,c,p,b,y,_,w=e.to,j=e.attachment,a=e.pin;"undefined"==typeof j&&(j=""),c=void 0,p=void 0,j.indexOf(" ")>=0?(_=j.split(" "),y=u(_,2),p=y[0],c=y[1]):c=p=j,i=W(h,w),("target"===p||"both"===p)&&(n<i[1]&&"top"===o.top&&(n+=m,o.top="bottom"),n+l>i[3]&&"bottom"===o.top&&(n-=m,o.top="top")),"together"===p&&("top"===o.top&&("bottom"===t.top&&n<i[1]?(n+=m,o.top="bottom",n+=l,t.top="top"):"top"===t.top&&n+l>i[3]&&n-(l-m)>=i[1]&&(n-=l-m,o.top="bottom",t.top="bottom")),"bottom"===o.top&&("top"===t.top&&n+l>i[3]?(n-=m,o.top="top",n-=l,t.top="bottom"):"bottom"===t.top&&n<i[1]&&n+(2*l-m)<=i[3]&&(n+=l-m,o.top="top",t.top="top")),"middle"===o.top&&(n+l>i[3]&&"top"===t.top?(n-=l,t.top="bottom"):n<i[1]&&"bottom"===t.top&&(n+=l,t.top="top"))),("target"===c||"both"===c)&&(s<i[0]&&"left"===o.left&&(s+=f,o.left="right"),s+d>i[2]&&"right"===o.left&&(s-=f,o.left="left")),"together"===c&&(s<i[0]&&"left"===o.left?"right"===t.left?(s+=f,o.left="right",s+=d,t.left="left"):"left"===t.left&&(s+=f,o.left="right",s-=d,t.left="right"):s+d>i[2]&&"right"===o.left?"left"===t.left?(s-=f,o.left="left",s-=d,t.left="right"):"right"===t.left&&(s-=f,o.left="left",s+=d,t.left="left"):"center"===o.left&&(s+d>i[2]&&"left"===t.left?(s-=d,t.left="right"):s<i[0]&&"right"===t.left&&(s+=d,t.left="left"))),("element"===p||"both"===p)&&(n<i[1]&&"bottom"===t.top&&(n+=l,t.top="top"),n+l>i[3]&&"top"===t.top&&(n-=l,t.top="bottom")),("element"===c||"both"===c)&&(s<i[0]&&("right"===t.left?(s+=d,t.left="left"):"center"===t.left&&(s+=d/2,t.left="left")),s+d>i[2]&&("left"===t.left?(s-=d,t.left="right"):"center"===t.left&&(s-=d/2,t.left="right"))),"string"==typeof a?a=a.split(",").map(function(e){return e.trim()}):a===!0&&(a=["top","left","right","bottom"]),a=a||[],r=[],b=[],n<i[1]&&(a.indexOf("top")>=0?(n=i[1],r.push("top")):b.push("top")),n+l>i[3]&&(a.indexOf("bottom")>=0?(n=i[3]-l,r.push("bottom")):b.push("bottom")),s<i[0]&&(a.indexOf("left")>=0?(s=i[0],r.push("left")):b.push("left")),s+d>i[2]&&(a.indexOf("right")>=0?(s=i[2]-d,r.push("right")):b.push("right")),r.length&&!function(){var e=void 0,e="undefined"!=typeof h.options.pinnedClass?h.options.pinnedClass:h.getClass("pinned");g.push(e),r.forEach(function(t){g.push(e+"-"+t)})}(),b.length&&!function(){var e=void 0,e="undefined"!=typeof h.options.outOfBoundsClass?h.options.outOfBoundsClass:h.getClass("out-of-bounds");g.push(e),b.forEach(function(t){g.push(e+"-"+t)})}(),(r.indexOf("left")>=0||r.indexOf("right")>=0)&&(t.left=o.left=!1),(r.indexOf("top")>=0||r.indexOf("bottom")>=0)&&(t.top=o.top=!1),(o.top!==v.top||o.left!==v.left||t.top!==h.attachment.top||t.left!==h.attachment.left)&&(h.updateAttachClasses(t,o),h.trigger("update",{attachment:t,targetAttachment:o}))}),c(function(){h.options.addTargetClasses!==!1&&r(h.target,g,p),r(h.element,g,p)}),{top:n,left:s}}});var s=o.Utils,i=s.getBounds,r=s.updateClasses,c=s.defer;return o.modules.push({position:function(e){var n=this,d=e.top,l=e.left,m=this.cache("element-bounds",function(){return i(n.element)}),f=m.height,p=m.width,t=this.getTargetBounds(),u=d+f,h=l+p,s=[];d<=t.bottom&&u>=t.top&&["left","right"].forEach(function(e){var n=t[e];(n===l||n===h)&&s.push(e)}),l<=t.right&&h>=t.left&&["top","bottom"].forEach(function(e){var n=t[e];(n===d||n===u)&&s.push(e)});var o=[],a=[],g=["left","top","right","bottom"];return o.push(this.getClass("abutted")),g.forEach(function(e){o.push(n.getClass("abutted")+"-"+e)}),s.length&&a.push(this.getClass("abutted")),s.forEach(function(e){a.push(n.getClass("abutted")+"-"+e)}),c(function(){n.options.addTargetClasses!==!1&&r(n.target,a,o),r(n.element,a,o)}),!0}}),u=function(){function e(e,t){var n,r,s=[],o=!0,i=!1,a=void 0;try{for(n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&n.return&&n.return()}finally{if(i)throw a}}return s}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o.modules.push({position:function(e){var t,n,s,a,r,o=e.top,i=e.left;if(this.options.shift)return t=this.options.shift,"function"==typeof this.options.shift&&(t=this.options.shift.call(this,{top:o,left:i})),n=void 0,s=void 0,"string"==typeof t?(t=t.split(" "),t[1]=t[1]||t[0],r=t,a=u(r,2),n=a[0],s=a[1],n=parseFloat(n,10),s=parseFloat(s,10)):(n=t.top,s=t.left),o+=n,i+=s,{top:o,left:i}}}),q})